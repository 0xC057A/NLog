<?xml version="1.0" encoding="windows-1250" ?>
<?xml-stylesheet type="text/xsl" href="style.xsl" ?>
<content lang="en" id="howto" subid="howto_write_layout_appender">
    <h1>How to write your own layout appender</h1>
    <!--

    <h5>Why would I want to write an appender?</h5>

    <p>If you want to write your trace messages to some non-standard output (for example to some management tool or over the network or using the PPP-over-pigeon protocol) you need to write a custom appender.</p>

    <h5>How to write an appender?</h5>
    <p>
        It's really easy. Create a class that inherits from <code>NLog.Appenders.Appender</code> 
        and override the <code>Append()</code> method. In the body of the method use 
        <code>CompiledLayout.GetFormattedMessage()</code> to get the message text, then send the text to the destination media.
    </p>

    <h5>Example</h5>
    <p>This is a skeleton appender that writes messages to the specified host. Compile using:</p>
    <p>
        <code>csc.exe /t:library /out:MyAssembly.dll /r:NLog.dll MyFirstAppender.cs</code>
    </p>

<cs src="examples/MyFirstAppender.cs" />

<h5>How to use the newly created appender?</h5>
<p>

    It's easy. Just put the appender in a DLL and reference it from the the config file using the <x><extensions /></x>
    clause as described <a href="config.html#extensions">here</a>.
</p>

<h5>Configuration file example</h5>

<xml-example src="examples/config7.nlog" />

<h5>How to pass configuration options to the appender?</h5>

<p>
Consider the above example. There's a property called "Host" that does just that. 
Having a public property that sets the required configuration parameters is enough for NLog to use it. 
Each attribute that you put in the <x><appender /></x> definition gets passed 
to the appropriate public property. NLog takes care of the appropriate conversions necessary so that
you can use integer, string, datetime, boolean parameters.
</p>

<h5>Do I really need to create a separate DLL?</h5>

<p>
    Not really. You can use AppenderFactory.Appender() to register your appender programmatically. 
    Just be sure to to it at the very beginning of your program before any log messages are written.
    It should be possible to reference your EXE using the <x><extensions /></x> clause.
</p>

<cs src="examples/AddAppender.cs" />
-->
</content>

