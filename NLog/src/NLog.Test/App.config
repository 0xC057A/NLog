<?xml version="1.0" encoding="windows-1250" ?>
<configuration>
    <configSections>
        <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
    </configSections>
    
    <nlog autoReload="true" internalLogToConsole="true" throwExceptions="true">
        <targets>
            <target name="xxx" type="BufferingWrapper">
                <target type="PostFilteringWrapper" 
                        defaultFilter="level >= LogLevel.Info">
                    <when exists="contains(message,'aaa')" 
                          filter="level >= LogLevel.Trace" />
                    
                    <target type="Console" layout="${processid} ${processname} ${threadname} ${callsite:filename=true:includesourcepath=false} ${threadid} ${gdc:item=GGG} ${message} ${logger}" />
                </target>
            </target>
            <target name="viewer" type="NLogViewer" address="udp://localhost:4000" />
            <target name="pc1" type="PerfCounter" CategoryName="NLog.Test1" CounterName="Counter1" CounterType="RateOfCountsPerSecond32" AutoCreate="true" />
        </targets>

        <rules>
            <logger name="*" minlevel="Debug" appendTo="xxx" />
            <logger name="*" minlevel="Debug" appendTo="viewer" />
            <logger name="*" minlevel="Trace" appendTo="pc1" />
        </rules>
    </nlog>
</configuration>

