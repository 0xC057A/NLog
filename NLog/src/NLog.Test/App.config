<?xml version="1.0" encoding="windows-1250" ?>
<configuration>
    <configSections>
        <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
    </configSections>
    <nlog autoReload="true" internalLogToConsole="true">
        <appenders>
            <appender name="console" type="Console" layout="${machinename}|${longdate}|${ndc:separator= -> :bottomframes=1}|${mdc:item=username}|${message}" />
            <appender name="database" type="Database" provider="mssql" dbhost="." dbdatabase="nlogtest">
                <commandText>
                    insert into LogTable(date,level,logger,message) values(@date, @level, @logger, @message);
                </commandText>

                <parameter name="@date" layout="${longdate}" />
                <parameter name="@level" layout="${level}" />
                <parameter name="@logger" layout="${logger}" />
                <parameter name="@message" layout="${message}" />
            </appender>
        </appenders>

        <rules>
            <logger name="*" minlevel="Debug" appendTo="console, database" />
        </rules>
    </nlog>
</configuration>
