<?xml version="1.0" encoding="windows-1250" ?>
<configuration>
    <configSections>
        <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog" />
    </configSections>
    
    <nlog autoReload="true" 
          throwExceptions="true"
          internalLogLevel="Trace"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xmlns="http://www.nlog-project.org/schemas/NLog.xsd">
        
        <targets>
            <wrapper-target name="a" xsi:type="AsyncWrapper">
                <target xsi:type="Mail" name="n2" 
                        from="jarek@atm.com.pl" 
                        to="jarek@atm.com.pl"
                        smtpServer="smtp.atm.lan"
                        addNewLines="true"
                    >
                    <layout xsi:type="CSVLayout" quoting="All">
                        <column name="time_stamp" layout="${longdate}" />
                        <column name="message" layout="${message}" />
                        <column name="level" layout="${level}" />
                        <column name="logger" layout="${logger}" />
                    </layout>
                </target>
            </wrapper-target>
            <target xsi:type="ColoredConsole" name="c">
                <layout xsi:type="CSVLayout">
                    <column name="time_stamp" layout="${longdate} ${file-contents:fileName=${aaa}:aaa=${b}} ${aaa}" />
                    <column name="message" layout="${message}" />
                    <column name="level" layout="${level}" />
                    <column name="logger" layout="${logger}" />
                    <column name="caller" layout="${stacktrace:format=Raw}" />
                    <column name="process" layout="${processid}" />
                    <column name="thread" layout="${threadid}" />
                </layout>
            </target>
        </targets>

        <rules>
            <logger name="*" writeTo="c,a" />
        </rules>
    </nlog>
</configuration>

